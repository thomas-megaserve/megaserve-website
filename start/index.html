<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Start Now — MegaServe Cyprus</title>
  <meta name="description" content="Begin your MegaServe intake — answer a few short questions so we can assess your eligibility, prepare your case, and connect you with the right specialist.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="/start">

  <!-- Favicons -->
  <link rel="icon" href="/assets/favicon.ico">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">

  <!-- Global styles (keep version to bust cache) -->
  <link rel="stylesheet" href="/style.css?v=12">

  <!-- JSON-LD (Breadcrumbs) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://megaserve.eu/"},
      {"@type":"ListItem","position":2,"name":"Start Now","item":"https://megaserve.eu/start"}
    ]
  }
  </script>

  <style>
    /* Page-local touch-ups (keeps global tokens intact) */
    .page-hero{background:#fafafa;border-bottom:2px solid var(--color-gold,#c9a227)}
    .page-hero .breadcrumbs{font-size:.9rem;opacity:.85;margin-bottom:.5rem}
    .page-hero .breadcrumbs a{color:inherit;text-decoration:none;border-bottom:1px dotted currentColor}
    .page-hero .eyebrow{letter-spacing:.08em;text-transform:uppercase;font-weight:600;opacity:.8;margin-bottom:.25rem}
    .page-hero h1{margin:0 0 .5rem}
    .lead{font-size:1.1rem;opacity:.9}
    .section{padding:2.5rem 0}
    .intake .progress{height:8px;background:#eee;border-radius:999px;margin:.5rem 0 1rem}
    .intake .progress .bar{height:100%;background:var(--color-gold,#c9a227);border-radius:999px;transition:width .25s ease}
    .intake .field{display:block;margin-bottom:1rem}
    .intake .field > span{display:block;margin-bottom:.25rem;font-weight:600}
    .intake .field input,.intake .field select,.intake .field textarea{width:100%;padding:.65rem .75rem;border:1px solid #ccc;border-radius:.5rem;font:inherit}
    .intake .checkbox{display:flex;gap:.5rem;align-items:flex-start;margin:.75rem 0}
    .intake .checkbox input{margin-top:.2rem}
    .intake .nav{display:flex;gap:.5rem;justify-content:flex-end;margin-top:.5rem}
    .intake .error{color:#b00020;min-height:1em;display:block}
    .intake fieldset{border:0;padding:0;margin:0}
    .intake .step{display:none}
    .intake .step.is-active{display:block}
    .tiny{font-size:.85rem}
    .muted{opacity:.8}
    .thanks{padding:1rem;border:1px solid #e5e5e5;border-radius:.75rem;background:#fcfcfc}
    /* Reduce max-width for readability if your .container is very wide */
    .intake .container{max-width:760px}
  </style>
</head>

<body>
  <!-- Site Header (same structure as other pages) -->
  <header class="site-header">
    <div class="container">
      <div class="header-inner">
        <a class="logo" href="/"><img src="/assets/logo.svg" alt="MegaServe Cyprus" height="40"></a>
        <nav class="site-nav" aria-label="Primary">
          <ul>
            <li><a href="/services/residence.html">Residence</a></li>
            <li><a href="/services/employment.html">Employment</a></li>
            <li><a href="/services/company.html">Company</a></li>
            <li><a href="/services/tax.html">Tax</a></li>
            <li><a href="/services/property.html">Property</a></li>
            <li><a href="/about.html">About</a></li>
            <li><a href="/contact.html">Contact</a></li>
            <li class="hide-on-mobile"><a class="btn btn-sm btn-primary" href="/start">Start Now</a></li>
          </ul>
        </nav>
        <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false"></button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="page-hero">
    <div class="container">
      <nav class="breadcrumbs" aria-label="Breadcrumb">
        <a href="/">Home</a> / <span>Start Now</span>
      </nav>
      <div class="eyebrow">Client Intake</div>
      <h1>Start Now</h1>
      <p class="lead">Answer a few questions so we can route you correctly. Takes ~2 minutes.</p>
    </div>
  </section>

  <!-- Main: Intake Form -->
  <main id="main" class="section">
    <section class="intake" id="intake">
      <div class="container">
        <!-- Progress -->
        <div class="progress" aria-hidden="true">
          <div class="bar" id="intakeProgress" style="width: 0%"></div>
        </div>

        <form id="intakeForm" novalidate>
          <!-- STEP 1: Contact -->
          <fieldset class="step is-active" data-step="1" aria-label="Your details">
            <label class="field">
              <span>Full name *</span>
              <input type="text" name="full_name" required autocomplete="name" />
              <small class="error"></small>
            </label>
            <label class="field">
              <span>Email *</span>
              <input type="email" name="email" required autocomplete="email" />
              <small class="error"></small>
            </label>
            <label class="field">
              <span>Phone (with country code)</span>
              <input type="tel" name="phone" inputmode="tel" autocomplete="tel" />
              <small class="error"></small>
            </label>
            <div class="nav">
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 2: What do you need? (branching root) -->
          <fieldset class="step" data-step="2" aria-label="Service">
            <label class="field">
              <span>What do you need help with? *</span>
              <select name="service" required>
                <option value="" hidden>Select one</option>
                <option value="residence">Residence / PR in Cyprus</option>
                <option value="company">Company setup / corporate admin</option>
                <option value="tax">Personal / corporate tax planning</option>
                <option value="property">Property purchase / relocation</option>
                <option value="other">Other (describe next)</option>
              </select>
              <small class="error"></small>
            </label>
            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 3A: Residence specifics (conditional) -->
          <fieldset class="step" data-step="3" data-branch="residence" aria-label="Residence details">
            <label class="field">
              <span>Status *</span>
              <select name="residence_status" required>
                <option value="" hidden>Select one</option>
                <option value="eu">EU citizen</option>
                <option value="non-eu">Non-EU citizen</option>
                <option value="family">Family member of EU citizen</option>
              </select>
              <small class="error"></small>
            </label>
            <label class="field">
              <span>Target route</span>
              <select name="residence_route">
                <option value="" hidden>Select (optional)</option>
                <option value="reg6-2">Permanent Residence Reg. 6(2)</option>
                <option value="work-permit">Employment permit</option>
                <option value="digit-nomad">Digital Nomad</option>
              </select>
            </label>
            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 3B: Company specifics (conditional) -->
          <fieldset class="step" data-step="3" data-branch="company" aria-label="Company details">
            <label class="field">
              <span>Current situation *</span>
              <select name="company_stage" required>
                <option value="" hidden>Select one</option>
                <option value="new">New Cyprus company</option>
                <option value="redomicile">Redomicile to Cyprus</option>
                <option value="admin">Ongoing corporate admin</option>
              </select>
              <small class="error"></small>
            </label>
            <label class="field">
              <span>Industry (optional)</span>
              <input type="text" name="industry" placeholder="e.g., SaaS, trading, holding" />
            </label>
            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 3C: Tax specifics (conditional) -->
          <fieldset class="step" data-step="3" data-branch="tax" aria-label="Tax details">
            <label class="field">
              <span>Scope *</span>
              <select name="tax_scope" required>
                <option value="" hidden>Select one</option>
                <option value="personal">Personal tax</option>
                <option value="corporate">Corporate tax</option>
                <option value="both">Both</option>
              </select>
              <small class="error"></small>
            </label>
            <label class="field">
              <span>Countries involved (comma-separated)</span>
              <input type="text" name="tax_countries" placeholder="e.g., Cyprus, Germany" />
            </label>
            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 3D: Property specifics (conditional) -->
          <fieldset class="step" data-step="3" data-branch="property" aria-label="Property details">
            <label class="field">
              <span>Property intent *</span>
              <select name="property_intent" required>
                <option value="" hidden>Select one</option>
                <option value="buy">Buy</option>
                <option value="sell">Sell</option>
                <option value="relocate">Relocate</option>
              </select>
              <small class="error"></small>
            </label>
            <label class="field">
              <span>Locations of interest</span>
              <input type="text" name="property_locations" placeholder="e.g., Nicosia, Limassol" />
            </label>
            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 3E: Other -->
          <fieldset class="step" data-step="3" data-branch="other" aria-label="Describe your case">
            <label class="field">
              <span>Brief description *</span>
              <textarea name="message" rows="5" required placeholder="Give us the core facts."></textarea>
              <small class="error"></small>
            </label>
            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 4: Budget & urgency -->
          <fieldset class="step" data-step="4" aria-label="Budget and timing">
            <label class="field">
              <span>Approximate budget *</span>
              <select name="budget" required>
                <option value="" hidden>Select one</option>
                <option value="<1k">Under €1,000</option>
                <option value="1-3k">€1,000–3,000</option>
                <option value="3-10k">€3,000–10,000</option>
                <option value=">10k">€10,000+</option>
              </select>
              <small class="error"></small>
            </label>
            <label class="field">
              <span>Urgency *</span>
              <select name="urgency" required>
                <option value="" hidden>Select one</option>
                <option value="asap">ASAP (this week)</option>
                <option value="2-4w">2–4 weeks</option>
                <option value="1-3m">1–3 months</option>
                <option value=">3m">3+ months</option>
              </select>
              <small class="error"></small>
            </label>
            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="button" class="btn btn-primary" data-next>Next</button>
            </div>
          </fieldset>

          <!-- STEP 5: Consent & submit -->
          <fieldset class="step" data-step="5" aria-label="Consent and submit">
            <label class="checkbox">
              <input type="checkbox" name="consent" required />
              <span>I agree to the Privacy Notice and to be contacted about my enquiry. *</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="marketing_ok" />
              <span>Optional: keep me updated with relevant changes in law.</span>
            </label>

            <!-- Hidden tracking fields -->
            <input type="hidden" name="utm_source" />
            <input type="hidden" name="utm_medium" />
            <input type="hidden" name="utm_campaign" />
            <input type="hidden" name="utm_content" />
            <input type="hidden" name="gclid" />
            <input type="hidden" name="fbclid" />
            <input type="hidden" name="referrer" />
            <input type="hidden" name="page" />

            <!-- Cloudflare Turnstile hook (optional) -->
            <div id="turnstile-container" class="mt-2"></div>

            <div class="nav">
              <button type="button" class="btn" data-prev>Back</button>
              <button type="submit" class="btn btn-primary">Send enquiry</button>
            </div>
            <p class="tiny muted">We respond within 1 business day.</p>
          </fieldset>

          <!-- Thank you state -->
          <div class="thanks" id="intakeThanks" hidden>
            <h3>Thanks—got it.</h3>
            <p>We’ll review and get back to you shortly. A confirmation has been sent to your email.</p>
          </div>
        </form>
      </div>
    </section>
  </main>

  <!-- Footer (same pattern as other pages) -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div>
          <a class="logo" href="/"><img src="/assets/logo-mark.svg" alt="MegaServe" height="36"></a>
          <p class="muted tiny">Administrative & corporate services for Cyprus residence, company, tax, and relocation.</p>
        </div>
        <nav aria-label="Footer">
          <ul>
            <li><a href="/services/residence.html">Residence</a></li>
            <li><a href="/services/employment.html">Employment</a></li>
            <li><a href="/services/company.html">Company</a></li>
            <li><a href="/services/tax.html">Tax</a></li>
            <li><a href="/services/property.html">Property</a></li>
          </ul>
        </nav>
        <div>
          <ul class="list-unstyled">
            <li><a href="/about.html">About</a></li>
            <li><a href="/contact.html">Contact</a></li>
            <li><a href="/privacy.html">Privacy</a></li>
            <li><a href="/terms.html">Terms</a></li>
          </ul>
          <p class="tiny">Email: <a href="mailto:admin@serusyn.com">admin@serusyn.com</a><br>Phone: <a href="tel:+357XXXXXXXX">+357 XXXXXXXX</a></p>
        </div>
      </div>
      <div class="footer-bottom tiny muted">© MegaServe Cyprus. All rights reserved.</div>
    </div>
  </footer>

  <!-- Minimal JS: nav toggle if your site uses it -->
  <script>
    const navToggle = document.querySelector('.nav-toggle');
    const nav = document.querySelector('.site-nav');
    if (navToggle && nav) {
      navToggle.addEventListener('click', () => {
        const expanded = navToggle.getAttribute('aria-expanded') === 'true' || false;
        navToggle.setAttribute('aria-expanded', String(!expanded));
        nav.classList.toggle('is-open');
      });
    }
  </script>

  <!-- Intake form logic -->
  <script>
  (function(){
    const FORM_ENDPOINT = "/api/intake"; // TODO: point to Netlify Function, CF Worker, or backend route
    const form = document.getElementById("intakeForm");
    const steps = Array.from(form.querySelectorAll(".step"));
    const progress = document.getElementById("intakeProgress");
    const thanks = document.getElementById("intakeThanks");
    let current = 0;

    // UTM/referrer capture
    const params = new URLSearchParams(location.search);
    form.elements["utm_source"].value = params.get("utm_source") || "";
    form.elements["utm_medium"].value = params.get("utm_medium") || "";
    form.elements["utm_campaign"].value = params.get("utm_campaign") || "";
    form.elements["utm_content"].value = params.get("utm_content") || "";
    form.elements["gclid"].value = params.get("gclid") || "";
    form.elements["fbclid"].value = params.get("fbclid") || "";
    form.elements["referrer"].value = document.referrer || "";
    form.elements["page"].value = location.pathname;

    function show(i){
      steps.forEach(s => s.classList.remove("is-active"));
      steps[i].classList.add("is-active");
      current = i;
      const pct = Math.round(((i+1)/steps.length)*100);
      progress.style.width = pct + "%";
      // Optional: focus first input of step for a11y
      const first = steps[i].querySelector("input, select, textarea, button[data-next]");
      if (first) first.focus({preventScroll:true});
    }

    function currentBranch(){
      const service = form.elements["service"]?.value;
      return service || "other";
    }

    function validateRequired(scope){
      let ok = true;
      scope.querySelectorAll("[required]").forEach(el=>{
        const small = el.parentElement.querySelector(".error");
        const missing = (el.type === "checkbox") ? !el.checked : !el.value;
        if(missing){
          ok = false;
          if(small){ small.textContent = "This field is required."; }
          el.setAttribute("aria-invalid","true");
        }else{
          if(small){ small.textContent = ""; }
          el.removeAttribute("aria-invalid");
        }
      });
      return ok;
    }

    function next(){
      const step = steps[current];
      if(!validateRequired(step)) return;

      if(step.dataset.step === "2"){
        const target = steps.findIndex(s => s.dataset.step === "3" && s.dataset.branch === currentBranch());
        show(target >= 0 ? target : steps.findIndex(s => s.dataset.step === "3" && s.dataset.branch === "other"));
        return;
      }
      if(step.dataset.step === "3"){ show(steps.findIndex(s=>s.dataset.step==="4")); return; }
      if(current < steps.length - 1) show(current + 1);
    }

    function prev(){
      const step = steps[current];
      if(step.dataset.step === "4"){
        const target = steps.findIndex(s => s.dataset.step === "3" && s.dataset.branch === currentBranch());
        show(target >= 0 ? target : steps.findIndex(s => s.dataset.step === "3" && s.dataset.branch === "other"));
        return;
      }
      if(current > 0) show(current - 1);
    }

    form.addEventListener("click", (e)=>{
      const btn = e.target.closest("button");
      if(!btn) return;
      if(btn.hasAttribute("data-next")) { e.preventDefault(); next(); }
      if(btn.hasAttribute("data-prev")) { e.preventDefault(); prev(); }
    });

    form.addEventListener("submit", async (e)=>{
      e.preventDefault();
      const finalStep = steps[current];
      if(!validateRequired(finalStep)) return;

      const data = Object.fromEntries(new FormData(form).entries());

      try{
        const res = await fetch(FORM_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });
        if(!res.ok) throw new Error("Submit failed");
        form.querySelectorAll("fieldset").forEach(fs => fs.hidden = true);
        thanks.hidden = false;
      }catch(err){
        alert("Submission error. Please try again or email admin@serusyn.com.");
      }
    });

    // init
    show(0);
  })();
  </script>
</body>
</html>
